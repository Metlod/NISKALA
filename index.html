<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NISKALA AI - Studio</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="script.js" defer></script> 
    <style>
        .active-ratio { border-color: #8b5cf6 !important; color: white !important; }
        .style-card.active { border-color: #8b5cf6 !important; background-color: rgba(139, 92, 246, 0.3); }
        .style-card { transition: all 0.2s ease; cursor: pointer; }
        input[type=range] { -webkit-appearance: none; background: #2d3450; height: 6px; border-radius: 5px; outline: none; }
        input[type=range]::-webkit-slider-thumb { -webkit-appearance: none; height: 16px; width: 16px; border-radius: 50%; background: #8b5cf6; cursor: pointer; border: 2px solid #fff; }
        
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #0f121d; }
        ::-webkit-scrollbar-thumb { background: #1e2337; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #8b5cf6; }
    </style>
</head>
<body class="bg-[#0f121d] text-gray-300 font-sans h-screen flex overflow-hidden">

    <aside class="w-[340px] bg-[#1e2337] flex flex-col border-r border-gray-800 overflow-y-auto shrink-0 z-10">
        <div class="p-8 flex flex-col items-center">
            <img src="niskala.png" alt="Logo" class="w-32 h-auto mb-2">
            <span class="tracking-[0.3em] text-[10px] font-black text-[#8b5cf6] uppercase">Studio Pro</span>
        </div>

        <div class="px-6 space-y-6 pb-10">
            <div class="space-y-4">
                <div class="space-y-2">
                    <input type="file" id="fileInput" class="hidden" accept="image/*">
                    <button id="uploadBtn" class="w-full text-left px-4 py-3 rounded-xl hover:bg-white/5 transition flex items-center gap-3 text-sm border border-white/5 bg-[#141824]">
                        <i class="fa-solid fa-image text-gray-400"></i> Upload Reference
                    </button>
                    <div id="refDescriptionContainer" class="hidden">
                        <textarea id="refDesc" rows="2" placeholder="Briefly describe the reference pose..." class="w-full bg-[#0f121d] border border-white/5 rounded-xl p-3 text-xs outline-none mt-2 text-gray-400"></textarea>
                    </div>
                </div>
            </div>

            <div>
                <label class="text-[10px] uppercase tracking-widest text-gray-500 font-bold mb-3 block">Aesthetic</label>
                <div id="styleContainer" class="grid grid-cols-3 gap-2">
                    <div class="style-card active h-12 bg-[#141824] rounded-xl flex items-center justify-center border border-white/5" data-style="professional photography, shot on 35mm lens, f/1.8, high resolution portrait">
                        <span class="text-[8px] font-bold">REAL</span>
                    </div>
                    <div class="style-card h-12 bg-[#141824] rounded-xl flex items-center justify-center border border-white/5" data-style="high quality anime illustration, studio ghibli style, vibrant colors">
                        <span class="text-[8px] font-bold">ANIME</span>
                    </div>
                    <div class="style-card h-12 bg-[#141824] rounded-xl flex items-center justify-center border border-white/5" data-style="artistic concept art, digital painting, dramatic lighting, detailed brushwork">
                        <span class="text-[8px] font-bold">ART</span>
                    </div>
                </div>
            </div>

            <div class="bg-[#141824] rounded-2xl p-4 border border-white/5">
                <textarea id="promptInput" rows="4" placeholder="Describe your subject (e.g. 'A man in a leather jacket')..." 
                    class="w-full bg-transparent border-none outline-none text-sm resize-none placeholder-gray-500 text-white"></textarea>
            </div>

            <div class="space-y-2">
                <label class="text-[10px] uppercase font-black text-gray-500 block">Aspect Ratio</label>
                <div class="flex gap-1">
                    <button class="ratio-btn active-ratio flex-1 py-2 bg-[#1e2337] rounded-lg text-[9px] font-bold border border-white/5" data-w="1024" data-h="1024">1:1</button>
                    <button class="ratio-btn flex-1 py-2 bg-[#1e2337] rounded-lg text-[9px] font-bold border border-white/5" data-w="1216" data-h="684">16:9</button>
                    <button class="ratio-btn flex-1 py-2 bg-[#1e2337] rounded-lg text-[9px] font-bold border border-white/5" data-w="684" data-h="1216">9:16</button>
                </div>
            </div>

            <div class="space-y-3">
                <button id="generateBtn" class="w-full py-4 bg-[#8b5cf6] hover:bg-[#7c3aed] rounded-2xl font-black text-white text-xs uppercase tracking-widest transition-all shadow-lg active:scale-95">
                    Generate Image
                </button>
                <button id="resetBtn" class="w-full py-3 bg-transparent border border-white/10 text-gray-500 rounded-xl font-bold text-[10px] uppercase hover:text-white hover:border-white/30 transition">
                    Reset Studio
                </button>
            </div>
        </div>
    </aside>

    <main class="flex-1 flex flex-col items-center p-12 bg-[#0b0e14] overflow-y-auto h-screen w-full relative">
        
        <div class="w-full max-w-[1000px] bg-[#1e2337] rounded-[40px] p-8 flex flex-col md:flex-row gap-10 border border-white/5 shadow-2xl relative shrink-0">
            <div class="flex-1 min-h-[500px] bg-[#0f121d] rounded-[30px] flex items-center justify-center overflow-hidden border border-white/10 relative">
                <div id="loader" class="hidden flex flex-col items-center gap-4">
                    <div class="w-12 h-12 border-4 border-[#8b5cf6] border-t-transparent rounded-full animate-spin"></div>
                    <span class="text-[10px] font-bold tracking-[0.2em] text-[#8b5cf6]">ENGINE ACTIVE</span>
                </div>
                <img id="outputImage" class="hidden w-full h-full object-contain" src="">
                <p id="placeholderText" class="text-gray-700 font-bold uppercase tracking-widest text-xs">Ready for input</p>
            </div>

            <div class="w-full md:w-[280px] flex flex-col justify-between py-2">
                <div>
                    <h2 id="displayName" class="text-3xl font-black text-white mb-6 uppercase tracking-tighter">NISKALA</h2>
                    <div class="space-y-4">
                        <div>
                            <h3 class="font-bold text-[9px] mb-1 uppercase text-gray-500 tracking-widest">Active Engine</h3>
                            <p id="engineStatus" class="text-[#8b5cf6] text-xs font-bold uppercase">Flux.1 Precision</p>
                        </div>
                    </div>
                </div>
                <div class="flex flex-col gap-3">
                    <button id="downloadBtn" class="w-full bg-white text-black py-4 rounded-2xl font-black text-[10px] uppercase hover:bg-gray-200 transition">Download PNG</button>
                </div>
            </div>
        </div>

        <div class="w-full max-w-[1000px] mt-12 mb-10 shrink-0">
            <div class="flex justify-between items-end mb-6 px-2 border-b border-white/5 pb-2">
                <div>
                    <h3 class="text-white font-black text-sm uppercase tracking-widest">History</h3>
                    <p class="text-[10px] text-gray-500 mt-1">Local session storage</p>
                </div>
                <button id="clearHistoryBtn" class="text-red-400 text-[9px] font-bold uppercase tracking-widest hover:text-red-300 transition bg-red-500/10 px-3 py-1 rounded hover:bg-red-500/20">
                    Clear All
                </button>
            </div>
            
            <div id="historyGrid" class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4">
                </div>
        </div>

    </main>
</body>
</html>